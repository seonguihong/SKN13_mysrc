<!-- form2.html -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body>
        <input type="checkbox" name="abc" value="yes"> 광고 수신 여부
        <div class="container mt-3">
            <form name="f1">
                취미를 선택하세요 (1개 이상선택)
                <div>
                    <input type="checkbox" name="hobby" id="reading" value="독서" class="form-check-input"/>
                    <label for="reading">독서</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="음악" class="form-check-input" />
                    <label>음악</label>
                </div> 
                <div>
                    <input type="checkbox" name="hobby" value="운동" class="form-check-input" />
                    <label>운동</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="게임" class="form-check-input" />
                    <label>게임</label>
                </div>
                <div>
                    <input type="checkbox" name="hobby" value="영화" class="form-check-input" />
                    <label>영화</label>
                </div>
                <div>
                    <input type="checkbox" name="allCheck" id="all" onclick="checkAll()" class="form-check-input" />
                    <label for="all">모두선택/해제</label>
                </div>

                <p>
                    <input type="button" value="체크박스확인" onclick="checkHobby()" class="btn btn-primary mt-1" />
                </p>
            </form>
        </div>

        <script>
            function checkHobby() {
                // hobby이름의 노드가 여러개 조회 -> Node List로 반환.
                // 노드들을 배열에 담어서 반환.
                hobbyList = document.f1.hobby; //[cb, cb, cb, cb, cb]
                console.log(hobbyList)

                let cnt = 0; //체크된 checkbox의 개수
                for (let idx in hobbyList) {
                    //checkbox.checked: true-check상태, false-uncheck상태
                    if (hobbyList[idx].checked) { 
                        cnt++; 
                    }
                }
                if (cnt === 0) {
                    alert("취미는 한개 이상 선택하세요.");
                    return;
                }
                alert("전송-form.submit()");
                
            }

            function checkAll() {
                let flag = document.f1.allCheck.checked;
                console.log(flag)

                hobbyList = document.f1.hobby;// [cb, cb, cb, cb, cb]
                for (let idx in hobbyList) {
                    hobbyList[idx].checked = flag;
                }
            }
        </script>
    </body>
</html>
